<div class="container-fluid">
  <div class="content">
    <% if can?(:read, Status) %>
      <div class="row">
        <div class="col-md-12">
          <div class="panel <%= worker_label(@process.current_status) %>">
            <div class="panel-heading">Jobs</div>
            <table class="table">
              <thead>
                <tr>
                  <th class="jobs">Processed</th>
                  <th class="jobs">Failed</th>
                  <th class="jobs">Busy</th>
                  <th class="jobs">Enqueued</th>
                  <th class="jobs">Retries</th>
                  <th class="jobs">Scheduled</th>
                  <th class="jobs">Dead</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                <% if can?(:manage, Status) %>
                  <td class="jobs"><%= link_to_if @process.stats.processed > 0, number_with_delimiter(@process.stats.processed), sidekiq_web_path, target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.stats.failed > 0, number_with_delimiter(@process.stats.failed), sidekiq_web_path, target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.workers_size > 0, number_with_delimiter(@process.workers_size), "/sidekiq/busy", target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.stats.enqueued > 0, number_with_delimiter(@process.stats.enqueued), "/sidekiq/queues", target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.stats.retry_size > 0, number_with_delimiter(@process.stats.retry_size), "/sidekiq/retries", target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.stats.scheduled_size > 0, number_with_delimiter(@process.stats.scheduled_size), "/sidekiq/scheduled", target: "_blank" %></td>
                  <td class="jobs"><%= link_to_if @process.stats.dead_size > 0, number_with_delimiter(@process.stats.dead_size), "/sidekiq/morgue", target: "_blank" %></td>
                <% else %>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.processed) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.failed) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.workers_size) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.enqueued) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.retry_size) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.scheduled_size) %></td>
                  <td class="jobs"><%= number_with_delimiter(@process.stats.dead_size) %></td>
                <% end %>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
